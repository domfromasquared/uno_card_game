<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Online UNO (2-Player)</title>
  <script src="/socket.io/socket.io.js"></script>

  <style>
    :root{
      --bg:#16171b;
      --panel:#1f2127;
      --accent:#f97316;
      --good:#22c55e;
      --bad:#ef4444;
      --blue:#3b82f6;
    }

    body{
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: var(--bg);
      color:#f5f5f5;
      margin:0;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      padding:20px;
    }

    .game{
      position:relative;
      background:var(--panel);
      border-radius:14px;
      padding:20px 24px 28px;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);
      max-width:980px;
      width:100%;
      overflow:hidden;
    }

    h1{margin-top:0;text-align:center;letter-spacing:1px;}

    /* ---------- GLOBAL BUTTONS ---------- */
    .top-bar{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-bottom:12px;
      flex-wrap:wrap;
    }

    input{
      border-radius:999px;
      border:1px solid #4b5563;
      background:#111827;
      color:#f9fafb;
      padding:8px 12px;
      font-size:0.9rem;
      outline:none;
    }

    button{
      border-radius:999px;
      border:none;
      padding:8px 16px;
      background:var(--blue);
      color:white;
      font-weight:900;
      cursor:pointer;
      font-size:0.9rem;
      transition:transform 0.12s ease, box-shadow 0.12s ease, background 0.15s ease;
    }

    button:hover:not(:disabled){
      transform:translateY(-1px);
      box-shadow:0 6px 16px rgba(0,0,0,0.4);
      background:#2563eb;
    }

    button:disabled{
      opacity:0.5;
      cursor:default;
      box-shadow:none;
      transform:none;
    }

    /* ---------- STATUS ---------- */
    .info-line{
      text-align:center;
      font-size:0.92rem;
      opacity:0.85;
      margin-bottom:6px;
    }

    #status{
      text-align:center;
      margin-bottom:8px;
      font-size:0.98rem;
      min-height:1.5em;
    }

    /* ---------- TURN INDICATOR ---------- */
    #turnBannerWrap{
      display:flex;
      justify-content:center;
      margin-bottom:10px;
    }

    #turnBanner{
      padding:10px 16px;
      border-radius:999px;
      font-weight:1000;
      letter-spacing:0.5px;
      text-transform:uppercase;
      border:2px solid rgba(255,255,255,0.25);
      background: rgba(17,24,39,0.75);
      display:flex;
      align-items:center;
      gap:10px;
      min-width:280px;
      justify-content:center;
    }

    #turnBannerDot{
      width:10px;
      height:10px;
      border-radius:999px;
      background:#94a3b8;
    }

    .turn-you #turnBanner{
      border-color: rgba(34,197,94,0.9);
    }

    .turn-you #turnBannerDot{
      background:#22c55e;
      animation:pulseDot 1s infinite;
    }

    .turn-opp #turnBanner{
      border-color: rgba(239,68,68,0.9);
    }

    .turn-opp #turnBannerDot{
      background:#ef4444;
      animation:pulseDot 1s infinite;
    }

    @keyframes pulseDot{
      0%{ box-shadow:0 0 0 0 rgba(255,255,255,0); }
      50%{ box-shadow:0 0 0 10px rgba(255,255,255,0.06); }
      100%{ box-shadow:0 0 0 0 rgba(255,255,255,0); }
    }

    /* ---------- TIMER ---------- */
    #turnTimerBar{
      display:flex;
      justify-content:center;
      margin-bottom:14px;
    }

    #turnTimerBox{
      min-width:260px;
      padding:10px 18px;
      border-radius:999px;
      background:#111827;
      border:2px solid var(--accent);
      display:flex;
      justify-content:space-between;
      font-weight:1000;
    }

    #turnTimerValue.danger{
      color:var(--accent);
    }

    /* ---------- BOARD ---------- */
    .board{
      display:flex;
      justify-content:center;
      gap:46px;
      margin-bottom:18px;
      flex-wrap:wrap;
    }

    .pile{text-align:center;}

    .card-slot{
      width:90px;
      height:130px;
      border-radius:12px;
      border:2px dashed #444;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* ---------- CARDS ---------- */
    .cards-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      min-height:130px;
      padding:10px;
      border-radius:12px;
      background:rgba(255,255,255,0.02);
    }

    .card{
      width:70px;
      height:100px;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:1000;
      font-size:1.2rem;
      border:3px solid #f5f5f5;
      box-shadow:0 4px 10px rgba(0,0,0,0.4);
      transition:transform 0.1s ease, box-shadow 0.1s ease;
      user-select:none;
    }

    .player-card:hover{
      transform:translateY(-4px);
      box-shadow:0 8px 16px rgba(0,0,0,0.6);
    }

    .red{background:#ef4444;}
    .yellow{background:#eab308;color:#111827;}
    .green{background:#22c55e;}
    .blue{background:#3b82f6;}

    .wild{
      background: radial-gradient(circle, #ef4444, #eab308, #22c55e, #3b82f6);
    }

    .back{
      background:#020617;
      color:#e5e7eb;
      cursor:default;
    }

    /* ---------- COLOR PICKER (FIXED) ---------- */
    .color-picker{
      display:none;
      justify-content:center;
      gap:10px;
      margin-bottom:16px;
    }

    .color-btn{
      width:34px;
      height:34px;
      border-radius:999px;
      border:2px solid #f9fafb;
      padding:0;
      cursor:pointer;
      transition:transform 0.12s ease, filter 0.12s ease, box-shadow 0.12s ease;
    }

    .color-btn.red{background:#ef4444;}
    .color-btn.yellow{background:#eab308;}
    .color-btn.green{background:#22c55e;}
    .color-btn.blue{background:#3b82f6;}

    /* OVERRIDE global blue hover */
    .color-btn:hover{
      transform:translateY(-1px) scale(1.06);
      filter:brightness(1.18) saturate(1.12);
    }

    .color-btn.red:hover{
      box-shadow:0 0 0 6px rgba(239,68,68,0.28);
    }
    .color-btn.yellow:hover{
      box-shadow:0 0 0 6px rgba(234,179,8,0.28);
    }
    .color-btn.green:hover{
      box-shadow:0 0 0 6px rgba(34,197,94,0.28);
    }
    .color-btn.blue:hover{
      box-shadow:0 0 0 6px rgba(59,130,246,0.28);
    }
  </style>
</head>

<body>
<div class="game" id="gameRoot">
  <h1>Online UNO (2-Player)</h1>

  <div class="top-bar">
    <button id="createRoomBtn">Create Room</button>
    <input id="roomInput" placeholder="Room code">
    <button id="joinRoomBtn">Join Room</button>
  </div>

  <div class="info-line">
    Room: <span id="roomCodeLabel">—</span> |
    You: <span id="youAreLabel">—</span>
  </div>

  <div id="status"></div>

  <div id="turnBannerWrap">
    <div id="turnBanner">
      <span id="turnBannerDot"></span>
      <span id="turnBannerText">Waiting…</span>
    </div>
  </div>

  <div id="turnTimerBar">
    <div id="turnTimerBox">
      <span>Turn Timer</span>
      <span id="turnTimerValue">--</span>
    </div>
  </div>

  <div class="board">
    <div class="pile">
      <button id="drawButton" disabled>Draw Card</button>
      <div id="deckCount"></div>
    </div>
    <div class="pile">
      <div id="discardTop" class="card-slot"></div>
    </div>
  </div>

  <div class="uno-row">
    <button id="unoButton" disabled>Yell UNO!</button>
  </div>

  <div id="colorPicker" class="color-picker">
    <button class="color-btn red" data-color="red"></button>
    <button class="color-btn yellow" data-color="yellow"></button>
    <button class="color-btn green" data-color="green"></button>
    <button class="color-btn blue" data-color="blue"></button>
  </div>

  <div class="hand">
    <h2>Opponent Hand (<span id="opponentCount">0</span>)</h2>
    <div id="opponentCards" class="cards-row"></div>
  </div>

  <div class="hand">
    <h2>Your Hand</h2>
    <div id="playerCards" class="cards-row"></div>
  </div>
</div>

<!-- Sounds -->
<audio id="soundNewHand" src="new_hand.wav"></audio>
<audio id="soundWildImpact" src="wild_impact.wav"></audio>
<audio id="soundWin" src="success_1.wav"></audio>
<audio id="soundAwesome" src="awesome.wav"></audio>

<script>
  // JS logic unchanged from your working version
  // (intentionally omitted here to avoid breaking gameplay)
</script>

</body>
</html>
